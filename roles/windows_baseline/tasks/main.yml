---
- name: Ensure baseline packages via Chocolatey (optional)
  ansible.windows.win_chocolatey:
    name:
      - 7zip
      - git
    state: present
  when: false   # flip to true later once you confirm choco is installed

- name: Ensure Windows Update service is running
  ansible.windows.win_service:
    name: wuauserv
    state: started
    start_mode: auto

- name: Print Windows facts summary
  ansible.windows.win_shell: |
    $PSVersionTable.PSVersion
    (Get-CimInstance Win32_OperatingSystem | Select-Object Caption, Version, BuildNumber | Format-List | Out-String)
  register: win_summary

- debug:
    var: win_summary.stdout_lines
